<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Martijn W Heymans" />

<meta name="date" content="2021-01-13" />

<title>Workflow to Develop and Validate a Prediction model in Multiply Imputed data</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Workflow to Develop and Validate a Prediction model in Multiply Imputed data</h1>
<h4 class="author">Martijn W Heymans</h4>
<h4 class="date">2021-01-13</h4>



<div id="introduction" class="section level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>This vignette shows how to develop, internally and externally validate a (logistic) regression prediction model with <code>mice</code> and <code>psfmi</code>.</p>
</div>
<div id="steps" class="section level1 unnumbered">
<h1 class="unnumbered">Steps</h1>
<ul>
<li><a href="#step-1---install-the-psfmi-and-mice-package">Step 1 - Install the psfmi and mice package</a></li>
<li><a href="#step-2---impute-the-missing-data-with-mice">Step 2 - Impute the missing data with mice</a></li>
<li><a href="#step-3---develop-the-model">Step 3 - Develop the model</a></li>
<li><a href="#step-4---determine-model-performance">Step 4 - Determine model performance</a></li>
<li><a href="#step-5---internally-validate-the-model">Step 5 - Internally validate the model</a></li>
<li><a href="#step-6---shrink-pooled-coefficients-and-determine-new-intercept">Step 6 - Shrink pooled coefficients and determine new intercept</a></li>
<li><a href="#step-7---externally-validate-the-model">Step 7 - Externally validate the model</a></li>
</ul>
<div id="step-1---install-the-psfmi-and-mice-package" class="section level2 unnumbered">
<h2 class="unnumbered">Step 1 - Install the psfmi and mice package</h2>
<p>You can install the released version of psfmi with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;psfmi&quot;</span>)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;mwheymans/psfmi&quot;</span>)</span></code></pre></div>
<p>You can install the released version of mice with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;mice&quot;</span>)</span></code></pre></div>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div id="step-2---impute-the-missing-data-with-mice" class="section level2 unnumbered">
<h2 class="unnumbered">Step 2 - Impute the missing data with mice</h2>
<p>I generated 5 imputed datasets to handle the missing values in the lbp_orig dataset that is included in the <code>psfmi</code> package. Depending on the amount of missing data, the number of imputed datasets may be increased (see on-line book: <a href="https://bookdown.org/mwheymans/bookmi/multiple-imputation.html#number-of-imputed-datasets-and-iterations">Applied Missing Data analysis</a>).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>  imp <span class="ot">&lt;-</span> <span class="fu">mice</span>(lbp_orig, <span class="at">m=</span><span class="dv">5</span>, <span class="at">maxit=</span><span class="dv">10</span>, <span class="at">seed =</span> <span class="dv">750</span>) </span></code></pre></div>
<pre><code>## 
##  iter imp variable
##   1   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   1   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   1   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   1   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   1   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   2   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   2   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   2   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   2   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   2   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   3   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   3   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   3   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   3   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   3   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   4   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   4   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   4   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   4   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   4   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   5   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   5   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   5   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   5   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   5   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   6   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   6   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   6   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   6   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   6   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   7   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   7   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   7   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   7   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   7   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   8   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   8   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   8   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   8   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   8   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   9   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   9   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   9   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   9   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   9   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   10   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   10   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   10   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   10   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport
##   10   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</code></pre>
<p>Use the <code>complete</code> function of the <code>mice</code> package to extract the completed datasets. By setting <code>action = &quot;long&quot;</code> and <code>include = FALSE</code>, the imputed datasets are stacked under each other to form one long dataset and the original dataset (that included missing values) is not included in that long dataset.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  data_comp <span class="ot">&lt;-</span> <span class="fu">complete</span>(imp, <span class="at">action =</span> <span class="st">&quot;long&quot;</span>, <span class="at">include =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div id="step-3---develop-the-model" class="section level2 unnumbered">
<h2 class="unnumbered">Step 3 - Develop the model</h2>
<p>Use the <code>psfmi_lr</code> function in the <code>psfmi</code> package to perform backward selection over the 5 multiply imputed datasets with a p-value of 0.05 and as selection method D1.<br />
<strong>Note</strong> that with this function it is possible to include cubic spline coefficients in case of non-linear relationships during backward selection and that predictors may be forced in the model during backward selection by including them at the setting <code>keep.predictors</code>. When the setting <code>direction</code> is changed to FW, forward selection is done.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>  pool_lr <span class="ot">&lt;-</span> <span class="fu">psfmi_lr</span>(<span class="at">data=</span>data_comp, <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, <span class="at">Outcome=</span><span class="st">&quot;Chronic&quot;</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">predictors=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;Age&quot;</span>, <span class="st">&quot;JobControl&quot;</span>, <span class="st">&quot;Tampascale&quot;</span>, <span class="st">&quot;Pain&quot;</span>, <span class="st">&quot;Radiation&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;JobDemands&quot;</span>, <span class="st">&quot;SocialSupport&quot;</span>, <span class="st">&quot;Smoking&quot;</span>), <span class="at">cat.predictors =</span> <span class="fu">c</span>(<span class="st">&quot;Satisfaction&quot;</span>, <span class="st">&quot;Carrying&quot;</span>), </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">spline.predictors =</span> <span class="st">&quot;Function&quot;</span>, <span class="at">nknots =</span> <span class="dv">3</span>,  </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">keep.predictors =</span> <span class="st">&quot;Radiation&quot;</span>, <span class="at">p.crit =</span> <span class="fl">0.157</span>, <span class="at">method=</span><span class="st">&quot;D1&quot;</span>, <span class="at">direction =</span> <span class="st">&quot;BW&quot;</span>)</span></code></pre></div>
<pre><code>## Removed at Step 1 is - Gender</code></pre>
<pre><code>## Removed at Step 2 is - JobDemands</code></pre>
<pre><code>## Removed at Step 3 is - Smoking</code></pre>
<pre><code>## Removed at Step 4 is - Age</code></pre>
<pre><code>## Removed at Step 5 is - Tampascale</code></pre>
<pre><code>## Removed at Step 6 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 7 is - JobControl</code></pre>
<pre><code>## Removed at Step 8 is - SocialSupport</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>  pool_lr<span class="sc">$</span>RR_model_final</span></code></pre></div>
<pre><code>## $`Step 9`
##                    term   estimate std.error  statistic        df      p.value
## 1           (Intercept) -5.6290593 1.1754061 -4.7890336  39.95530 2.318419e-05
## 2                  Pain  0.9354091 0.1851492  5.0521901  67.68397 3.532584e-06
## 3             Radiation  0.5186631 0.5151459  1.0068276  91.48901 3.166731e-01
## 4 factor(Satisfaction)2 -0.4282950 0.6531511 -0.6557364  44.49919 5.153699e-01
## 5 factor(Satisfaction)3 -2.6431297 0.9429219 -2.8031270  26.83928 9.283867e-03
## 6     factor(Carrying)2  1.2554087 0.6254666  2.0071556  78.40085 4.817958e-02
## 7     factor(Carrying)3  1.6871723 0.6473849  2.6061349 115.47451 1.036350e-02
##            OR    lower.EXP  upper.EXP
## 1 0.003591953 0.0003338808  0.0386429
## 2 2.548255652 1.7610642412  3.6873197
## 3 1.679780430 0.6037849102  4.6732905
## 4 0.651619185 0.1747816872  2.4293596
## 5 0.071138280 0.0102714430  0.4926917
## 6 3.509272384 1.0103539396 12.1887907
## 7 5.404177760 1.4991278521 19.4814186</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>  pool_lr<span class="sc">$</span>multiparm_final</span></code></pre></div>
<pre><code>## $`Step 9`
##                       p-values D1 F-statistic
## Pain                 1.275830e-06   25.524625
## Radiation            3.148421e-01    1.013702
## factor(Satisfaction) 2.426042e-02    4.267156
## factor(Carrying)     3.261509e-02    3.483376</code></pre>
<p>The same result can be obtained by using the <code>formula</code> setting in the <code>psfmi_lr</code> function</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>  pool_lr <span class="ot">&lt;-</span> <span class="fu">psfmi_lr</span>(<span class="at">data=</span>data_comp, <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> Chronic <span class="sc">~</span> Gender <span class="sc">+</span> Age <span class="sc">+</span> JobControl <span class="sc">+</span> Tampascale <span class="sc">+</span> Pain <span class="sc">+</span> Radiation <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    JobDemands <span class="sc">+</span> SocialSupport <span class="sc">+</span> Smoking <span class="sc">+</span> <span class="fu">factor</span>(Satisfaction) <span class="sc">+</span> <span class="fu">factor</span>(Carrying) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rcs</span>(Function, <span class="dv">3</span>), <span class="at">keep.predictors =</span> <span class="st">&quot;Radiation&quot;</span>, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">p.crit =</span> <span class="fl">0.157</span>, <span class="at">method=</span><span class="st">&quot;D1&quot;</span>, <span class="at">direction =</span> <span class="st">&quot;BW&quot;</span>)</span></code></pre></div>
<pre><code>## Removed at Step 1 is - Gender</code></pre>
<pre><code>## Removed at Step 2 is - JobDemands</code></pre>
<pre><code>## Removed at Step 3 is - Smoking</code></pre>
<pre><code>## Removed at Step 4 is - Age</code></pre>
<pre><code>## Removed at Step 5 is - Tampascale</code></pre>
<pre><code>## Removed at Step 6 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 7 is - JobControl</code></pre>
<pre><code>## Removed at Step 8 is - SocialSupport</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>  pool_lr<span class="sc">$</span>RR_model_final</span></code></pre></div>
<pre><code>## $`Step 9`
##                    term   estimate std.error  statistic        df      p.value
## 1           (Intercept) -5.6290593 1.1754061 -4.7890336  39.95530 2.318419e-05
## 2                  Pain  0.9354091 0.1851492  5.0521901  67.68397 3.532584e-06
## 3             Radiation  0.5186631 0.5151459  1.0068276  91.48901 3.166731e-01
## 4 factor(Satisfaction)2 -0.4282950 0.6531511 -0.6557364  44.49919 5.153699e-01
## 5 factor(Satisfaction)3 -2.6431297 0.9429219 -2.8031270  26.83928 9.283867e-03
## 6     factor(Carrying)2  1.2554087 0.6254666  2.0071556  78.40085 4.817958e-02
## 7     factor(Carrying)3  1.6871723 0.6473849  2.6061349 115.47451 1.036350e-02
##            OR    lower.EXP  upper.EXP
## 1 0.003591953 0.0003338808  0.0386429
## 2 2.548255652 1.7610642412  3.6873197
## 3 1.679780430 0.6037849102  4.6732905
## 4 0.651619185 0.1747816872  2.4293596
## 5 0.071138280 0.0102714430  0.4926917
## 6 3.509272384 1.0103539396 12.1887907
## 7 5.404177760 1.4991278521 19.4814186</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>  pool_lr<span class="sc">$</span>multiparm_final</span></code></pre></div>
<pre><code>## $`Step 9`
##                       p-values D1 F-statistic
## Pain                 1.275830e-06   25.524625
## Radiation            3.148421e-01    1.013702
## factor(Satisfaction) 2.426042e-02    4.267156
## factor(Carrying)     3.261509e-02    3.483376</code></pre>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div id="step-4---determine-model-performance" class="section level2 unnumbered">
<h2 class="unnumbered">Step 4 - Determine model performance</h2>
<p>The performance of the model selected at step 3 can be determined by using the <code>pool_performance</code> function.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>  pool_select <span class="ot">&lt;-</span> <span class="fu">psfmi_lr</span>(<span class="at">data=</span>data_comp, <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> Chronic <span class="sc">~</span> Pain <span class="sc">+</span> Radiation <span class="sc">+</span> <span class="fu">factor</span>(Satisfaction) <span class="sc">+</span> <span class="fu">factor</span>(Carrying),  </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">p.crit =</span> <span class="dv">1</span>, <span class="at">method=</span><span class="st">&quot;D1&quot;</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  perf <span class="ot">&lt;-</span> <span class="fu">pool_performance</span>(<span class="at">data=</span>data_comp, <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Outcome =</span> <span class="st">&quot;Chronic&quot;</span>, <span class="at">predictors =</span> <span class="fu">c</span>(<span class="st">&quot;Pain&quot;</span>, <span class="st">&quot;Radiation&quot;</span>, <span class="st">&quot;factor(Satisfaction)&quot;</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;factor(Carrying)&quot;</span>), <span class="at">cal.plot=</span><span class="cn">TRUE</span>, <span class="at">plot.indiv=</span><span class="cn">FALSE</span>, <span class="at">groups_cal =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>  perf</span></code></pre></div>
<pre><code>## $ROC_pooled
##             95% Low    AUC 95% Up
## AUC (logit)  0.8144 0.8978 0.9462
## 
## $coef_pooled
##           (Intercept)                  Pain             Radiation 
##            -5.6290593             0.9354091             0.5186631 
## factor(Satisfaction)2 factor(Satisfaction)3     factor(Carrying)2 
##            -0.4282950            -2.6431297             1.2554087 
##     factor(Carrying)3 
##             1.6871723 
## 
## $R2_pooled
## [1] 0.5842591
## 
## $Brier_Scaled_pooled
## [1] 0.4882759
## 
## $nimp
## [1] 5</code></pre>
</div>
<div id="step-5---internally-validate-the-model" class="section level2 unnumbered">
<h2 class="unnumbered">Step 5 - Internally validate the model</h2>
<p>To internally validate the model we use the <code>psfmi_perform</code> function. With this function five different methods can be used to internally validate models in MI data <a href="https://mwheymans.github.io/psfmi/articles/">see these Vignettes</a>, Three methods use cross-validation and two bootstrapping in combination with MI.</p>
<p>We will use cross-validation and more specific the method <a href="https://mwheymans.github.io/psfmi/articles/cv_MI_RR.html">cv_MI_RR</a>. With this method it is possible to integrate backward selection into the cross-validation procedure. The last model that is selected by the psfmi_lr function is internally validated. So, if we want to apply backward selection during cross-validation from the full model we first have to apply the psfmi_lr function without variable selection. That is what we apply here, because we know that variable selection is one of the main reasons that prediction models are over-fitted.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>  pool_val <span class="ot">&lt;-</span> <span class="fu">psfmi_lr</span>(<span class="at">data=</span>data_comp, <span class="at">formula =</span> Chronic <span class="sc">~</span> Gender <span class="sc">+</span> Age <span class="sc">+</span> JobControl <span class="sc">+</span> Tampascale <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                      Pain <span class="sc">+</span> Radiation <span class="sc">+</span> JobDemands <span class="sc">+</span> SocialSupport <span class="sc">+</span> Smoking <span class="sc">+</span> <span class="fu">factor</span>(Satisfaction) <span class="sc">+</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">factor</span>(Carrying) <span class="sc">+</span> <span class="fu">rcs</span>(Function, <span class="dv">3</span>), <span class="at">p.crit =</span> <span class="dv">1</span>, <span class="at">direction=</span><span class="st">&quot;BW&quot;</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, <span class="at">method=</span><span class="st">&quot;D1&quot;</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">200</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  res_cv <span class="ot">&lt;-</span> <span class="fu">psfmi_perform</span>(pool_val, <span class="at">val_method =</span> <span class="st">&quot;cv_MI_RR&quot;</span>, <span class="at">data_orig =</span> lbp_orig, <span class="at">folds =</span> <span class="dv">5</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">p.crit=</span><span class="fl">0.05</span>, <span class="at">BW=</span><span class="cn">TRUE</span>, <span class="at">nimp_mice =</span> <span class="dv">10</span>, <span class="at">miceImp =</span> miceImp, <span class="at">printFlag =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## fold 1</code></pre>
<pre><code>## Removed at Step 1 is - Age</code></pre>
<pre><code>## Removed at Step 2 is - Smoking</code></pre>
<pre><code>## Removed at Step 3 is - Gender</code></pre>
<pre><code>## Removed at Step 4 is - Tampascale</code></pre>
<pre><code>## Removed at Step 5 is - JobDemands</code></pre>
<pre><code>## Removed at Step 6 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 7 is - SocialSupport</code></pre>
<pre><code>## Removed at Step 8 is - JobControl</code></pre>
<pre><code>## Removed at Step 9 is - Radiation</code></pre>
<pre><code>## Removed at Step 10 is - factor(Carrying)</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<pre><code>## 
## fold 2</code></pre>
<pre><code>## Removed at Step 1 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 2 is - Radiation</code></pre>
<pre><code>## Removed at Step 3 is - Gender</code></pre>
<pre><code>## Removed at Step 4 is - JobControl</code></pre>
<pre><code>## Removed at Step 5 is - Age</code></pre>
<pre><code>## Removed at Step 6 is - SocialSupport</code></pre>
<pre><code>## Removed at Step 7 is - Smoking</code></pre>
<pre><code>## Removed at Step 8 is - JobDemands</code></pre>
<pre><code>## Removed at Step 9 is - Tampascale</code></pre>
<pre><code>## Removed at Step 10 is - factor(Carrying)</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<pre><code>## 
## fold 3</code></pre>
<pre><code>## Removed at Step 1 is - Gender</code></pre>
<pre><code>## Removed at Step 2 is - JobDemands</code></pre>
<pre><code>## Removed at Step 3 is - Tampascale</code></pre>
<pre><code>## Removed at Step 4 is - Smoking</code></pre>
<pre><code>## Removed at Step 5 is - JobControl</code></pre>
<pre><code>## Removed at Step 6 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 7 is - Age</code></pre>
<pre><code>## Removed at Step 8 is - SocialSupport</code></pre>
<pre><code>## Removed at Step 9 is - Radiation</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<pre><code>## 
## fold 4</code></pre>
<pre><code>## Removed at Step 1 is - Gender</code></pre>
<pre><code>## Removed at Step 2 is - Smoking</code></pre>
<pre><code>## Removed at Step 3 is - JobDemands</code></pre>
<pre><code>## Removed at Step 4 is - JobControl</code></pre>
<pre><code>## Removed at Step 5 is - Radiation</code></pre>
<pre><code>## Removed at Step 6 is - factor(Carrying)</code></pre>
<pre><code>## Removed at Step 7 is - SocialSupport</code></pre>
<pre><code>## Removed at Step 8 is - Age</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<pre><code>## 
## fold 5</code></pre>
<pre><code>## Removed at Step 1 is - JobDemands</code></pre>
<pre><code>## Removed at Step 2 is - Gender</code></pre>
<pre><code>## Removed at Step 3 is - Smoking</code></pre>
<pre><code>## Removed at Step 4 is - Tampascale</code></pre>
<pre><code>## Removed at Step 5 is - rcs(Function,3)</code></pre>
<pre><code>## Removed at Step 6 is - Age</code></pre>
<pre><code>## Removed at Step 7 is - Radiation</code></pre>
<pre><code>## Removed at Step 8 is - SocialSupport</code></pre>
<pre><code>## Removed at Step 9 is - JobControl</code></pre>
<pre><code>## Removed at Step 10 is - factor(Carrying)</code></pre>
<pre><code>## 
## Selection correctly terminated, 
## No more variables removed from the model</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>  res_cv</span></code></pre></div>
<pre><code>## $stats
##                  Train      Test
## AUC          0.8877807 0.8467882
## Brier scaled 0.4657961 0.3374208
## Rsq          0.5622000 0.5117315
## 
## $slope
##  Intercept      Slope 
## -0.1494438  0.8449148</code></pre>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div id="step-6---shrink-pooled-coefficients-and-determine-new-intercept" class="section level2 unnumbered">
<h2 class="unnumbered">Step 6 - Shrink pooled coefficients and determine new intercept</h2>
<p>We can use the slope value of 0.8449148 that was estimated at the previous step as a shrinkage factor to prevent our model from being overfitted in new data. We do this by multiplying the pooled coefficients with the shrinkage factor and also to determine a new intercept value that is aligned with the shrunken coefficients.</p>
<p>We use the <code>pool_intadj</code> function for this that will provide the adjusted coefficients and new intercept value.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>  pool_select <span class="ot">&lt;-</span> <span class="fu">psfmi_lr</span>(<span class="at">data=</span>data_comp, <span class="at">nimp=</span><span class="dv">5</span>, <span class="at">impvar=</span><span class="st">&quot;.imp&quot;</span>, </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> Chronic <span class="sc">~</span> Pain <span class="sc">+</span> Radiation <span class="sc">+</span> <span class="fu">factor</span>(Satisfaction) <span class="sc">+</span> <span class="fu">factor</span>(Carrying),  </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">p.crit =</span> <span class="dv">1</span>, <span class="at">method=</span><span class="st">&quot;D1&quot;</span>)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">pool_intadj</span>(pool_select, <span class="at">shrinkage_factor =</span> <span class="fl">0.8449148</span>)</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>  res<span class="sc">$</span>int_adj</span></code></pre></div>
<pre><code>## [1] -4.795145</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>  res<span class="sc">$</span>coef_shrink_pooled</span></code></pre></div>
<pre><code>##                  Pain             Radiation factor(Satisfaction)2 
##             0.7903410             0.4382261            -0.3618728 
## factor(Satisfaction)3     factor(Carrying)2     factor(Carrying)3 
##            -2.2332194             1.0607134             1.4255169</code></pre>
<p>The last step is to externally validate this adjusted model.</p>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div id="step-7---externally-validate-the-model" class="section level2 unnumbered">
<h2 class="unnumbered">Step 7 - Externally validate the model</h2>
<p>We validate the model in an external dataset that is imputed five times due to missing data.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>  res_extval <span class="ot">&lt;-</span> <span class="fu">mivalext_lr</span>(<span class="at">data.val =</span> lbpmi_extval, <span class="at">nimp =</span> <span class="dv">5</span>, <span class="at">impvar =</span> <span class="st">&quot;Impnr&quot;</span>,</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Outcome =</span> <span class="st">&quot;Chronic&quot;</span>, <span class="at">predictors =</span> pool_lr<span class="sc">$</span>predictors_final,</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lp.orig =</span> <span class="fu">c</span>(res<span class="sc">$</span>int_adj, res<span class="sc">$</span>coef_shrink_pooled),</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">cal.plot =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
## Pooled performance measures over m = 5 imputed external validation datasets correctly estimated</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>  res_extval<span class="sc">$</span>ROC</span></code></pre></div>
<pre><code>## $`ROC (logit)`
##             95% Low    AUC 95% Up
## AUC (logit)  0.7382 0.8482 0.9172
## 
## $`ROC (median)`
## 1st Qu.  Median 3rd Qu. 
## 0.84803 0.84897 0.85366</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>  res_extval<span class="sc">$</span>R2_fixed</span></code></pre></div>
<pre><code>## $`Fisher Z (fixed)`
## [1] 0.45587
## 
## $`Median (fixed)`
## 1st Qu.  Median 3rd Qu. 
## 0.46034 0.46045 0.47505</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>  res_extval<span class="sc">$</span>HLtest</span></code></pre></div>
<pre><code>##         D         p        df       df2 
##   0.71479   0.67820   8.00000 149.55620</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>  res_extval<span class="sc">$</span>LP_pooled_ext</span></code></pre></div>
<pre><code>## intercept     slope 
##  -0.01812   0.88741</code></pre>
<p>In the external dataset the AUC is 0.8482 and the R-squared 0.45587. The Hosmer and Lemeshow test has a p-value of 0.67820, which means that the fit is satisfactory. This is also confirmed on the calibration plot where the calibration curves in each imputed dataset are near the optimal (dashed) line. The slope (regression coefficients) has a value of 0.88741 and slightly deviates from the value of 1, which means that the coefficients values differ between the development and external dataset.</p>
<p>Back to <a href="#steps">Steps</a></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
